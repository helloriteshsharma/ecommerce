{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import api from\"../Router/api\";import\"../comp_css/Cart.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{var _cartData$cartItems;const navigate=useNavigate();const[cartData,setCartData]=useState({});const[totalAmount,setTotalAmount]=useState(0);let cartId=localStorage.getItem(\"cartid\");let userId=localStorage.getItem(\"userid\");const apiCallOrderPlaced=()=>{api.post(\"/ecom/orders/placed/\".concat(userId)).then(response=>{alert(\"Order Placed Succesfuly.....\");navigate(\"/user/order-details\");}).catch(error=>{console.error(\"Error fetching data from the API: \",error);});};const orderPlaced=()=>{apiCallOrderPlaced();};const fetchCartData=()=>{api.get(\"/ecom/cart/products/\".concat(cartId)).then(response=>{setCartData(response.data);setTotalAmount(response.data.totalAmount);}).catch(error=>{console.error(\"Error fetching data from the API: \",error);});};useEffect(()=>{document.title=\"Ecommerse | Cart\";fetchCartData();},[cartId,totalAmount]);const emptyCart=()=>{api.delete(\"/ecom/cart/empty-Cart/\".concat(cartId)).then(response=>{setTotalAmount(response.data.toalAmout);alert(\"All cart Item remove\");fetchCartData();}).catch(error=>{alert(\"Cart is empty\");});};const removeProductfromCart=productid=>{api.delete(\"/ecom/cart/remove-product/\".concat(cartId,\"/\").concat(productid)).then(response=>{alert(\"Product removed from cart\");fetchCartData();}).catch(error=>{alert(\"Cart is empty\");});};const increaseCount=productid=>{api.put(\"/ecom/cart/increase-productQty/\".concat(cartId,\"/\").concat(productid)).then(response=>{setTotalAmount(response.data.totalAmount);fetchCartData();}).catch(error=>{console.log(error);});};const decreaseCount=productid=>{api.put(\"ecom/cart/decrease-productQty/\".concat(cartId,\"/\").concat(productid)).then(response=>{setTotalAmount(response.data.totalAmount);fetchCartData();}).catch(error=>{console.log(error);alert(\"Product can be further decrese....\");});};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-page\",children:[((_cartData$cartItems=cartData.cartItems)===null||_cartData$cartItems===void 0?void 0:_cartData$cartItems.length)>0?/*#__PURE__*/_jsx(\"div\",{className:\"cart-list\",children:cartData.cartItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cartproduct-image1\",children:/*#__PURE__*/_jsx(\"img\",{src:item.product.imageUrl,alt:item.product.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartproduct-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:item.product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Category: \",item.product.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",item.product.description]}),/*#__PURE__*/_jsxs(\"h2\",{className:\"cartproduct-price\",children:[\"Price: \\u20B9 \",item.product.price]}),/*#__PURE__*/_jsxs(\"div\",{className:\"increaseBtn\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>increaseCount(item.product.productId),children:\"+\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"25px\",color:\"red\",textAlign:\"center\"},children:item.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>decreaseCount(item.product.productId),children:\"-\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeProductfromCart(item.product.productId),children:\"Remove\"})})]})]},item.cartItemId))}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-cart-message\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Your cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Shop Now\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Total Cart Amount: \"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"$\",\"   \"+totalAmount]}),/*#__PURE__*/_jsxs(\"div\",{className:\"counter-box\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:orderPlaced,children:\"Order Placed\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>emptyCart(cartId),style:{backgroundColor:\"red\"},children:\"Empty Cart\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{navigate(\"/user/order-details\");},children:\"Order Page\"})})]})]})]});};export default Cart;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","api","jsx","_jsx","jsxs","_jsxs","Cart","_cartData$cartItems","navigate","cartData","setCartData","totalAmount","setTotalAmount","cartId","localStorage","getItem","userId","apiCallOrderPlaced","post","concat","then","response","alert","catch","error","console","orderPlaced","fetchCartData","get","data","document","title","emptyCart","delete","toalAmout","removeProductfromCart","productid","increaseCount","put","log","decreaseCount","className","children","cartItems","length","map","item","src","product","imageUrl","alt","name","category","description","price","onClick","productId","style","fontSize","color","textAlign","quantity","cartItemId","to","backgroundColor"],"sources":["C:/Users/rites/OneDrive/Desktop/Spark2.0-Ecom-master/frontend/src/pages/Cart.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport api from \"../Router/api\";\nimport \"../comp_css/Cart.css\";\n\nconst Cart = () => {\n  const navigate = useNavigate();\n  const [cartData, setCartData] = useState({});\n  const [totalAmount, setTotalAmount] = useState(0);\n  let cartId = localStorage.getItem(\"cartid\");\n  let userId = localStorage.getItem(\"userid\");\n\n  const apiCallOrderPlaced = () => {\n    api\n      .post(`/ecom/orders/placed/${userId}`)\n      .then((response) => {\n        alert(\"Order Placed Succesfuly.....\");\n        navigate(\"/user/order-details\");\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data from the API: \", error);\n      });\n  };\n\n  const orderPlaced = () => {\n    apiCallOrderPlaced();\n    \n  };\n  const fetchCartData = () => {\n    api\n      .get(`/ecom/cart/products/${cartId}`)\n      .then((response) => {\n        setCartData(response.data);\n        setTotalAmount(response.data.totalAmount);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data from the API: \", error);\n      });\n  };\n\n  useEffect(() => {\n    document.title = \"Ecommerse | Cart\";\n    fetchCartData();\n  }, [cartId, totalAmount]);\n  const emptyCart = () => {\n    api\n      .delete(`/ecom/cart/empty-Cart/${cartId}`)\n      .then((response) => {\n        setTotalAmount(response.data.toalAmout);\n        alert(\"All cart Item remove\");\n        fetchCartData();\n      })\n      .catch((error) => {\n        alert(\"Cart is empty\");\n      });\n  };\n\n  const removeProductfromCart = (productid) => {\n    api\n      .delete(`/ecom/cart/remove-product/${cartId}/${productid}`)\n      .then((response) => {\n        alert(\"Product removed from cart\");\n        fetchCartData();\n      })\n      .catch((error) => {\n        alert(\"Cart is empty\");\n      });\n  };\n\n  const increaseCount = (productid) => {\n    api\n      .put(`/ecom/cart/increase-productQty/${cartId}/${productid}`)\n      .then((response) => {\n        setTotalAmount(response.data.totalAmount);\n        fetchCartData();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const decreaseCount = (productid) => {\n    api\n      .put(`ecom/cart/decrease-productQty/${cartId}/${productid}`)\n      .then((response) => {\n        setTotalAmount(response.data.totalAmount);\n        fetchCartData();\n      })\n      .catch((error) => {\n        console.log(error);\n        alert(\"Product can be further decrese....\");\n      });\n  };\n\n  return (\n    <div className=\"cart-page\">\n      {cartData.cartItems?.length > 0 ? (\n        <div className=\"cart-list\">\n          {cartData.cartItems.map((item) => (\n            <div className=\"cart-card\" key={item.cartItemId}>\n              <div className=\"cartproduct-image1\">\n                <img src={item.product.imageUrl} alt={item.product.name} />\n              </div>\n              <div className=\"cartproduct-info\">\n                <h2>{item.product.name}</h2>\n                <p>Category: {item.product.category}</p>\n                <p>Description: {item.product.description}</p>\n                <h2 className=\"cartproduct-price\">\n                  Price: â‚¹ {item.product.price}\n                </h2>\n                <div className=\"increaseBtn\">\n                  <button onClick={() => increaseCount(item.product.productId)}>\n                    +\n                  </button>\n                  <span\n                    style={{\n                      fontSize: \"25px\",\n                      color: \"red\",\n                      textAlign: \"center\",\n                    }}\n                  >\n                    {item.quantity}\n                  </span>\n                  <button onClick={() => decreaseCount(item.product.productId)}>\n                    -\n                  </button>\n                </div>\n                <div>\n                  <button\n                    onClick={() =>\n                      removeProductfromCart(item.product.productId)\n                    }\n                  >\n                    Remove\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <div className=\"empty-cart-message\">\n          <h1>\n            Your cart is empty. <Link to=\"/\">Shop Now</Link>\n          </h1>\n        </div>\n      )}\n\n      <div className=\"cart-details\">\n        <h2>Total Cart Amount: </h2>\n        <h2>${\"   \" + totalAmount}</h2>\n        <div className=\"counter-box\">\n          <div>\n            <button onClick={orderPlaced}>Order Placed</button>\n          </div>\n          <div>\n            <button\n              onClick={() => emptyCart(cartId)}\n              style={{ backgroundColor: \"red\" }}\n            >\n              Empty Cart\n            </button>\n          </div>\n          <div>\n            <button\n              onClick={() => {\n                navigate(\"/user/order-details\");\n              }}\n            >\n              Order Page\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAO,CAAAC,GAAG,KAAM,eAAe,CAC/B,MAAO,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9B,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,KAAAC,mBAAA,CACjB,KAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACS,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC5C,KAAM,CAACc,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAC,CAAC,CAAC,CACjD,GAAI,CAAAgB,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAC3C,GAAI,CAAAC,MAAM,CAAGF,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAE3C,KAAM,CAAAE,kBAAkB,CAAGA,CAAA,GAAM,CAC/BhB,GAAG,CACAiB,IAAI,wBAAAC,MAAA,CAAwBH,MAAM,CAAE,CAAC,CACrCI,IAAI,CAAEC,QAAQ,EAAK,CAClBC,KAAK,CAAC,8BAA8B,CAAC,CACrCd,QAAQ,CAAC,qBAAqB,CAAC,CACjC,CAAC,CAAC,CACDe,KAAK,CAAEC,KAAK,EAAK,CAChBC,OAAO,CAACD,KAAK,CAAC,oCAAoC,CAAEA,KAAK,CAAC,CAC5D,CAAC,CAAC,CACN,CAAC,CAED,KAAM,CAAAE,WAAW,CAAGA,CAAA,GAAM,CACxBT,kBAAkB,CAAC,CAAC,CAEtB,CAAC,CACD,KAAM,CAAAU,aAAa,CAAGA,CAAA,GAAM,CAC1B1B,GAAG,CACA2B,GAAG,wBAAAT,MAAA,CAAwBN,MAAM,CAAE,CAAC,CACpCO,IAAI,CAAEC,QAAQ,EAAK,CAClBX,WAAW,CAACW,QAAQ,CAACQ,IAAI,CAAC,CAC1BjB,cAAc,CAACS,QAAQ,CAACQ,IAAI,CAAClB,WAAW,CAAC,CAC3C,CAAC,CAAC,CACDY,KAAK,CAAEC,KAAK,EAAK,CAChBC,OAAO,CAACD,KAAK,CAAC,oCAAoC,CAAEA,KAAK,CAAC,CAC5D,CAAC,CAAC,CACN,CAAC,CAED1B,SAAS,CAAC,IAAM,CACdgC,QAAQ,CAACC,KAAK,CAAG,kBAAkB,CACnCJ,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,CAACd,MAAM,CAAEF,WAAW,CAAC,CAAC,CACzB,KAAM,CAAAqB,SAAS,CAAGA,CAAA,GAAM,CACtB/B,GAAG,CACAgC,MAAM,0BAAAd,MAAA,CAA0BN,MAAM,CAAE,CAAC,CACzCO,IAAI,CAAEC,QAAQ,EAAK,CAClBT,cAAc,CAACS,QAAQ,CAACQ,IAAI,CAACK,SAAS,CAAC,CACvCZ,KAAK,CAAC,sBAAsB,CAAC,CAC7BK,aAAa,CAAC,CAAC,CACjB,CAAC,CAAC,CACDJ,KAAK,CAAEC,KAAK,EAAK,CAChBF,KAAK,CAAC,eAAe,CAAC,CACxB,CAAC,CAAC,CACN,CAAC,CAED,KAAM,CAAAa,qBAAqB,CAAIC,SAAS,EAAK,CAC3CnC,GAAG,CACAgC,MAAM,8BAAAd,MAAA,CAA8BN,MAAM,MAAAM,MAAA,CAAIiB,SAAS,CAAE,CAAC,CAC1DhB,IAAI,CAAEC,QAAQ,EAAK,CAClBC,KAAK,CAAC,2BAA2B,CAAC,CAClCK,aAAa,CAAC,CAAC,CACjB,CAAC,CAAC,CACDJ,KAAK,CAAEC,KAAK,EAAK,CAChBF,KAAK,CAAC,eAAe,CAAC,CACxB,CAAC,CAAC,CACN,CAAC,CAED,KAAM,CAAAe,aAAa,CAAID,SAAS,EAAK,CACnCnC,GAAG,CACAqC,GAAG,mCAAAnB,MAAA,CAAmCN,MAAM,MAAAM,MAAA,CAAIiB,SAAS,CAAE,CAAC,CAC5DhB,IAAI,CAAEC,QAAQ,EAAK,CAClBT,cAAc,CAACS,QAAQ,CAACQ,IAAI,CAAClB,WAAW,CAAC,CACzCgB,aAAa,CAAC,CAAC,CACjB,CAAC,CAAC,CACDJ,KAAK,CAAEC,KAAK,EAAK,CAChBC,OAAO,CAACc,GAAG,CAACf,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,CAED,KAAM,CAAAgB,aAAa,CAAIJ,SAAS,EAAK,CACnCnC,GAAG,CACAqC,GAAG,kCAAAnB,MAAA,CAAkCN,MAAM,MAAAM,MAAA,CAAIiB,SAAS,CAAE,CAAC,CAC3DhB,IAAI,CAAEC,QAAQ,EAAK,CAClBT,cAAc,CAACS,QAAQ,CAACQ,IAAI,CAAClB,WAAW,CAAC,CACzCgB,aAAa,CAAC,CAAC,CACjB,CAAC,CAAC,CACDJ,KAAK,CAAEC,KAAK,EAAK,CAChBC,OAAO,CAACc,GAAG,CAACf,KAAK,CAAC,CAClBF,KAAK,CAAC,oCAAoC,CAAC,CAC7C,CAAC,CAAC,CACN,CAAC,CAED,mBACEjB,KAAA,QAAKoC,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvB,EAAAnC,mBAAA,CAAAE,QAAQ,CAACkC,SAAS,UAAApC,mBAAA,iBAAlBA,mBAAA,CAAoBqC,MAAM,EAAG,CAAC,cAC7BzC,IAAA,QAAKsC,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBjC,QAAQ,CAACkC,SAAS,CAACE,GAAG,CAAEC,IAAI,eAC3BzC,KAAA,QAAKoC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBvC,IAAA,QAAKsC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjCvC,IAAA,QAAK4C,GAAG,CAAED,IAAI,CAACE,OAAO,CAACC,QAAS,CAACC,GAAG,CAAEJ,IAAI,CAACE,OAAO,CAACG,IAAK,CAAE,CAAC,CACxD,CAAC,cACN9C,KAAA,QAAKoC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BvC,IAAA,OAAAuC,QAAA,CAAKI,IAAI,CAACE,OAAO,CAACG,IAAI,CAAK,CAAC,cAC5B9C,KAAA,MAAAqC,QAAA,EAAG,YAAU,CAACI,IAAI,CAACE,OAAO,CAACI,QAAQ,EAAI,CAAC,cACxC/C,KAAA,MAAAqC,QAAA,EAAG,eAAa,CAACI,IAAI,CAACE,OAAO,CAACK,WAAW,EAAI,CAAC,cAC9ChD,KAAA,OAAIoC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,EAAC,gBACvB,CAACI,IAAI,CAACE,OAAO,CAACM,KAAK,EAC1B,CAAC,cACLjD,KAAA,QAAKoC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BvC,IAAA,WAAQoD,OAAO,CAAEA,CAAA,GAAMlB,aAAa,CAACS,IAAI,CAACE,OAAO,CAACQ,SAAS,CAAE,CAAAd,QAAA,CAAC,GAE9D,CAAQ,CAAC,cACTvC,IAAA,SACEsD,KAAK,CAAE,CACLC,QAAQ,CAAE,MAAM,CAChBC,KAAK,CAAE,KAAK,CACZC,SAAS,CAAE,QACb,CAAE,CAAAlB,QAAA,CAEDI,IAAI,CAACe,QAAQ,CACV,CAAC,cACP1D,IAAA,WAAQoD,OAAO,CAAEA,CAAA,GAAMf,aAAa,CAACM,IAAI,CAACE,OAAO,CAACQ,SAAS,CAAE,CAAAd,QAAA,CAAC,GAE9D,CAAQ,CAAC,EACN,CAAC,cACNvC,IAAA,QAAAuC,QAAA,cACEvC,IAAA,WACEoD,OAAO,CAAEA,CAAA,GACPpB,qBAAqB,CAACW,IAAI,CAACE,OAAO,CAACQ,SAAS,CAC7C,CAAAd,QAAA,CACF,QAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,GArCwBI,IAAI,CAACgB,UAsChC,CACN,CAAC,CACC,CAAC,cAEN3D,IAAA,QAAKsC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjCrC,KAAA,OAAAqC,QAAA,EAAI,sBACkB,cAAAvC,IAAA,CAACJ,IAAI,EAACgE,EAAE,CAAC,GAAG,CAAArB,QAAA,CAAC,UAAQ,CAAM,CAAC,EAC9C,CAAC,CACF,CACN,cAEDrC,KAAA,QAAKoC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BvC,IAAA,OAAAuC,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BrC,KAAA,OAAAqC,QAAA,EAAI,GAAC,CAAC,KAAK,CAAG/B,WAAW,EAAK,CAAC,cAC/BN,KAAA,QAAKoC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BvC,IAAA,QAAAuC,QAAA,cACEvC,IAAA,WAAQoD,OAAO,CAAE7B,WAAY,CAAAgB,QAAA,CAAC,cAAY,CAAQ,CAAC,CAChD,CAAC,cACNvC,IAAA,QAAAuC,QAAA,cACEvC,IAAA,WACEoD,OAAO,CAAEA,CAAA,GAAMvB,SAAS,CAACnB,MAAM,CAAE,CACjC4C,KAAK,CAAE,CAAEO,eAAe,CAAE,KAAM,CAAE,CAAAtB,QAAA,CACnC,YAED,CAAQ,CAAC,CACN,CAAC,cACNvC,IAAA,QAAAuC,QAAA,cACEvC,IAAA,WACEoD,OAAO,CAAEA,CAAA,GAAM,CACb/C,QAAQ,CAAC,qBAAqB,CAAC,CACjC,CAAE,CAAAkC,QAAA,CACH,YAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAApC,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}