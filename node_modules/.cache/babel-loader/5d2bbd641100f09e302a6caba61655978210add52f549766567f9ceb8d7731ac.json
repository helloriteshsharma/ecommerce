{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{useNavigate,useNavigation}from\"react-router-dom\";import Profile from\"../components/Profile\";import api from\"../Router/api\";import\"../comp_css/order.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const OrderDetails=()=>{const navigate=useNavigate();const userId=localStorage.getItem(\"userid\");const[deleted,setDeleted]=useState(false);const[allOrder,setAllOrder]=useState([]);const handeldemakePayment=orderid=>{localStorage.setItem(\"orderid\",orderid);navigate(\"/user/make-payment\");};const handleProfileSection=userid=>{navigate(\"/user/profile/\".concat(userid));};const handeldeleteOrder=orderId=>{axios.delete(\"http://127.0.0.1:8080/ecom/orders/users/\".concat(userId,\"/\").concat(orderId)).then(response=>{alert(response.data);const updatedAllOrder=allOrder.filter(order=>order.orderId!==orderId);setAllOrder(updatedAllOrder);setDeleted(true);}).catch(error=>{console.error(\"Error fetching data from the API: \",error);});};useEffect(()=>{document.title=\"Ecommerse | Order details\";api.get(\"/ecom/orders/orders/\".concat(userId)).then(response=>{const sortedOrders=response.data.sort((a,b)=>{return new Date(b.orderDate)-new Date(a.orderDate);});setAllOrder(sortedOrders);setDeleted(false);}).catch(error=>{console.error(\"Error fetching data from the API: \",error);});},[deleted,userId]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"orderContainer\",children:allOrder.length>0?allOrder.map((order,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"order\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"odr1\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Order Number : \",index+1]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Order ID: \",order.orderId]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",order.status]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Order Date: \",new Date(order.orderDate).toLocaleString()]}),/*#__PURE__*/_jsxs(\"h3\",{style:{color:\"green\"},children:[\"Total Amount: $\",order.totalAmount]}),order.status===\"SHIPPED\"?/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:\"green\"},disabled:true,children:\"View\"}):/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:\"red\"},onClick:()=>{handeldeleteOrder(order.orderId);},children:\"Cancel Order\"}),order.status===\"SHIPPED\"?/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:\"green\"},disabled:true,children:\"SHIPPED\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handeldemakePayment(order.orderId);},children:\"Make Payment\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"odr2\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Order Items\"}),order.orderItem.map(item=>/*#__PURE__*/_jsxs(\"li\",{children:[item.product.name,\" - Quantity: \",item.quantity]},item.orderItemId))]})]},index)):/*#__PURE__*/_jsx(\"div\",{style:{color:\"green\",fontSize:\"20px\",border:\"2px solid grey\",height:\"50vh\",textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"h1\",{style:{marginTop:\"50px\"},children:\"No items present\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Order History\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleProfileSection(userId),children:\"View Profile\"})]})]})});};export default OrderDetails;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","useNavigation","Profile","api","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","OrderDetails","navigate","userId","localStorage","getItem","deleted","setDeleted","allOrder","setAllOrder","handeldemakePayment","orderid","setItem","handleProfileSection","userid","concat","handeldeleteOrder","orderId","delete","then","response","alert","data","updatedAllOrder","filter","order","catch","error","console","document","title","get","sortedOrders","sort","a","b","Date","orderDate","children","className","length","map","index","status","toLocaleString","style","color","totalAmount","backgroundColor","disabled","onClick","orderItem","item","product","name","quantity","orderItemId","fontSize","border","height","textAlign","marginTop"],"sources":["C:/Users/rites/OneDrive/Desktop/Spark2.0-Ecom-master/frontend/src/pages/OrderDetails.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate, useNavigation } from \"react-router-dom\";\nimport Profile from \"../components/Profile\";\nimport api from \"../Router/api\";\n\nimport \"../comp_css/order.css\";\n\nconst OrderDetails = () => {\n  const navigate = useNavigate();\n  const userId = localStorage.getItem(\"userid\");\n  const [deleted, setDeleted] = useState(false);\n  const [allOrder, setAllOrder] = useState([]);\n\n  const handeldemakePayment = (orderid) => {\n    localStorage.setItem(\"orderid\", orderid);\n    navigate(\"/user/make-payment\");\n  };\n\n  const handleProfileSection = (userid) => {\n    navigate(`/user/profile/${userid}`);\n  };\n \n  const handeldeleteOrder = (orderId) => {\n    axios\n      .delete(`http://127.0.0.1:8080/ecom/orders/users/${userId}/${orderId}`)\n      .then((response) => {\n        alert(response.data);\n\n        const updatedAllOrder = allOrder.filter(\n          (order) => order.orderId !== orderId\n        );\n        setAllOrder(updatedAllOrder);\n        setDeleted(true);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data from the API: \", error);\n      });\n  };\n\n  useEffect(() => {\n    document.title = \"Ecommerse | Order details\";\n    api\n      .get(`/ecom/orders/orders/${userId}`)\n      .then((response) => {\n        const sortedOrders = response.data.sort((a, b) => {\n          return new Date(b.orderDate) - new Date(a.orderDate);\n        });\n        setAllOrder(sortedOrders);\n        setDeleted(false);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data from the API: \", error);\n      });\n  }, [deleted, userId]);\n\n \n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"orderContainer\">\n       { allOrder.length > 0 ? (\n              allOrder.map((order, index) => (\n                <div key={index} className=\"order\">\n                  <div className=\"odr1\">\n                    <h3>Order Number : {index + 1}</h3>\n                    <p>Order ID: {order.orderId}</p>\n                    <p>Status: {order.status}</p>\n                    <p>\n                      Order Date: {new Date(order.orderDate).toLocaleString()}\n                    </p>\n                    <h3 style={{ color: \"green\" }}>\n                      Total Amount: ${order.totalAmount}\n                    </h3>\n\n                    {order.status === \"SHIPPED\" ? (\n                      <button style={{ backgroundColor: \"green\" }} disabled>\n                        View\n                      </button>\n                    ) : (\n                      <button\n                        style={{ backgroundColor: \"red\" }}\n                        onClick={() => {\n                          handeldeleteOrder(order.orderId);\n                        }}\n                      >\n                        Cancel Order\n                      </button>\n                    )}\n\n                    {order.status === \"SHIPPED\" ? (\n                      <button style={{ backgroundColor: \"green\" }} disabled>\n                        SHIPPED\n                      </button>\n                    ) : (\n                      <button\n                        onClick={() => {\n                          handeldemakePayment(order.orderId);\n                        }}\n                      >\n                        Make Payment\n                      </button>\n                    )}\n                  </div>\n\n                  <div className=\"odr2\">\n                    <h3>Order Items</h3>\n                    {order.orderItem.map((item) => (\n                      <li key={item.orderItemId}>\n                        {item.product.name} - Quantity: {item.quantity}\n                      </li>\n                    ))}\n                  </div>\n                </div>\n              ))\n            ) : (\n              <div\n                style={{\n                  color: \"green\",\n                  fontSize: \"20px\",\n                  border: \"2px solid grey\",\n                  height: \"50vh\",\n                  textAlign: \"center\",\n                }}\n              >\n                <h1 style={{ marginTop: \"50px\" }}>No items present</h1>\n              </div>\n            )}\n        </div>\n        <div className=\"box\">\n          <h3>Order History</h3>\n          <button onClick={() => handleProfileSection(userId)}>\n            View Profile\n          </button>\n          \n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default OrderDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}