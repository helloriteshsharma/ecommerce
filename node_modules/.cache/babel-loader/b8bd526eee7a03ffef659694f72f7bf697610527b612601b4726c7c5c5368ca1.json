{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams,Link,useNavigate}from\"react-router-dom\";import\"../comp_css/AllProductAdmin.css\";import axios from\"axios\";import api from\"../Router/api\";import UpdateProductForm from\"./UpdateProductForm\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const AllProductAdmin=()=>{const{productId}=useParams();const[products,setProducts]=useState([]);const[deleted,setDeleted]=useState(false);const[showUpdateModal,setShowUpdateModal]=useState(false);const[selectedProduct,setSelectedProduct]=useState(null);const updateProduct=productIdToUpdate=>{const productToUpdate=products.find(product=>product.productId===productIdToUpdate);setSelectedProduct(productToUpdate);setShowUpdateModal(true);};const closeUpdateModal=()=>{//sending function as a props to the updateproduct form\nsetSelectedProduct(null);setShowUpdateModal(false);};const handleUpdate=updatedProduct=>{//sending function as a props to the updateproduct form\napi.put(\"/ecom/products/update/\".concat(updatedProduct.productId),updatedProduct).then(response=>{console.log(response.data);console.log(\"working.....\");closeUpdateModal();}).catch(error=>{console.log(error.response.data.message);});};const deleteProduct=productIdToDelete=>{api.delete(\"/ecom/products/\".concat(productIdToDelete)).then(response=>{alert(response.data);const updatedProducts=products.filter(product=>product.productId!==productIdToDelete);setProducts(updatedProducts);setDeleted(true);}).catch(error=>{console.error(\"Error deleting product: \",error);alert(error.response.data.message);});};useEffect(()=>{axios.get(\"http://127.0.0.1:8080/ecom/products/all?sort=desc\").then(response=>{const sortedProducts=response.data.sort((a,b)=>b.productId-a.productId);setProducts(sortedProducts);setDeleted(false);}).catch(error=>{console.error(\"Error fetching data from the API: \",error);});},[productId,deleted]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{style:{color:\"green\",textAlign:\"center\",margin:\"5px\"},children:[\"ALL Live Products\",\" \"]}),showUpdateModal&&/*#__PURE__*/_jsx(\"div\",{className:\"update-modal\",children:/*#__PURE__*/_jsx(UpdateProductForm,{product:selectedProduct,onUpdate:handleUpdate,onClose:closeUpdateModal})}),/*#__PURE__*/_jsx(\"div\",{className:\"product-container1\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-image11\",children:/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info1\",children:[/*#__PURE__*/_jsx(\"h2\",{children:product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Product ID: \",product.productId]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Category: \",product.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description:\",\" \",product.description.length>30?product.description.substring(0,50)+\"...\":product.description]}),/*#__PURE__*/_jsxs(\"h2\",{className:\"product-price1\",children:[\"Price: \\u20B9 \",product.price]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateProduct(product.productId),children:\"update\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteProduct(product.productId),children:\"delete\"})]})]})]},product.productId))})]});};export default AllProductAdmin;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","axios","api","UpdateProductForm","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","AllProductAdmin","productId","products","setProducts","deleted","setDeleted","showUpdateModal","setShowUpdateModal","selectedProduct","setSelectedProduct","updateProduct","productIdToUpdate","productToUpdate","find","product","closeUpdateModal","handleUpdate","updatedProduct","put","concat","then","response","console","log","data","catch","error","message","deleteProduct","productIdToDelete","delete","alert","updatedProducts","filter","get","sortedProducts","sort","a","b","children","style","color","textAlign","margin","className","onUpdate","onClose","map","src","imageUrl","alt","name","category","description","length","substring","price","onClick"],"sources":["C:/Users/rites/OneDrive/Desktop/Spark2.0-Ecom-master/frontend/src/components/AllProductAdmin.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport \"../comp_css/AllProductAdmin.css\";\nimport axios from \"axios\";\nimport api from \"../Router/api\";\nimport UpdateProductForm from \"./UpdateProductForm\";\n\nconst AllProductAdmin = () => {\n  const { productId } = useParams();\n  const [products, setProducts] = useState([]);\n  const [deleted, setDeleted] = useState(false);\n  const [showUpdateModal, setShowUpdateModal] = useState(false); \n  const [selectedProduct, setSelectedProduct] = useState(null);\n\n  const updateProduct = (productIdToUpdate) => {\n    const productToUpdate = products.find(\n      (product) => product.productId === productIdToUpdate\n    );\n    setSelectedProduct(productToUpdate);\n    setShowUpdateModal(true);\n  };\n\n  const closeUpdateModal = () => {//sending function as a props to the updateproduct form\n    setSelectedProduct(null);\n    setShowUpdateModal(false);\n  };\n  \n  const handleUpdate = (updatedProduct) => {//sending function as a props to the updateproduct form\n    api\n      .put(`/ecom/products/update/${updatedProduct.productId}`, updatedProduct)\n      .then((response) => {\n        console.log(response.data);\n        console.log(\"working.....\");\n        closeUpdateModal();\n      })\n      .catch((error) => {\n        console.log(error.response.data.message);\n      });\n  };\n\n  const deleteProduct = (productIdToDelete) => {\n    api\n      .delete(`/ecom/products/${productIdToDelete}`)\n      .then((response) => {\n        alert(response.data);\n\n        const updatedProducts = products.filter(\n          (product) => product.productId !== productIdToDelete\n        );\n        setProducts(updatedProducts);\n        setDeleted(true);\n      })\n      .catch((error) => {\n        console.error(\"Error deleting product: \", error);\n        alert(error.response.data.message);\n      });\n  };\n\n  useEffect(() => {\n    axios\n      .get(\"http://127.0.0.1:8080/ecom/products/all?sort=desc\")\n      .then((response) => {\n        const sortedProducts = response.data.sort(\n          (a, b) => b.productId - a.productId\n        );\n        setProducts(sortedProducts);\n\n        setDeleted(false);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data from the API: \", error);\n      });\n  }, [productId, deleted]);\n\n  return (\n    <>\n      <h1 style={{ color: \"green\", textAlign: \"center\", margin: \"5px\" }}>\n        ALL Live Products{\" \"}\n      </h1>\n\n      {showUpdateModal && (\n        <div className=\"update-modal\">\n          <UpdateProductForm product={selectedProduct} onUpdate={handleUpdate}onClose={closeUpdateModal}\n          />\n        </div>\n      )}\n\n\n      <div className=\"product-container1\">\n        {products.map((product) => (\n          <div className=\"product-card1\" key={product.productId}>\n            <div className=\"product-image11\">\n              <img src={product.imageUrl} alt={product.name} />\n            </div>\n            <div className=\"product-info1\">\n              <h2>{product.name}</h2>\n              <p>Product ID: {product.productId}</p>\n              <p>Category: {product.category}</p>\n              <p>\n                Description:{\" \"}\n                {product.description.length > 30\n                  ? product.description.substring(0, 50) + \"...\"\n                  : product.description}\n              </p>\n\n              <h2 className=\"product-price1\">Price: â‚¹ {product.price}</h2>\n              <div className=\"button-container1\">\n                <button onClick={() => updateProduct(product.productId)}>\n                  update\n                </button>\n                <button onClick={() => deleteProduct(product.productId)}>\n                  delete\n                </button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div> \n    </>\n  );\n};\n\nexport default AllProductAdmin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}