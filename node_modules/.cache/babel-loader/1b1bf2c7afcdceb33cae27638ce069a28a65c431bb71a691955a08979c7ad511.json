{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import\"../comp_css/Product.css\";import api from\"../Router/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Product=()=>{const[products,setProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);const[selectedCategory,setSelectedCategory]=useState(\"All\");const[priceOrder,setPriceOrder]=useState(\"All\");const[nameSearch,setNameSearch]=useState(\"\");let userid=localStorage.getItem(\"userid\");const filterProducts=(category,priceOrder,nameSearch,data)=>{let filteredProducts=data;if(category!==\"All\"){filteredProducts=filteredProducts.filter(product=>product.category===category);}if(priceOrder===\"LowToHigh\"){filteredProducts=filteredProducts.sort((a,b)=>a.price-b.price);}else if(priceOrder===\"HighToLow\"){filteredProducts=filteredProducts.sort((a,b)=>b.price-a.price);}if(nameSearch!==\"\"){const searchQuery=nameSearch.toLowerCase();filteredProducts=filteredProducts.filter(product=>product.name.toLowerCase().includes(searchQuery));}setFilteredProducts(filteredProducts);};useEffect(()=>{axios.get(\"http://127.0.0.1:8080/ecom/products/all\").then(response=>{setProducts(response.data);filterProducts(selectedCategory,priceOrder,nameSearch,response.data);}).catch(error=>{console.error(\"Error fetching data from the API: \",error);});},[selectedCategory,priceOrder,nameSearch]);const addProductToCart=productid=>{api.post(\"/ecom/cart/add-product?userId=\".concat(userid,\"&productId=\").concat(productid)).then(response=>{localStorage.setItem(\"cartid\",response.data.cartId);alert(\"product added to Cart\");}).catch(error=>{if(error.response&&error.response.data){alert(error.response.data.message);}else{alert(\"Error To adding Product . Please try again later.\");console.error(\"Error registering:\",error);}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Filter\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedCategory,onChange:e=>{setSelectedCategory(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"All\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vegetables\",children:\"Vegetable\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fruits\",children:\"Fruits\"}),/*#__PURE__*/_jsx(\"option\",{value:\"electronics\",children:\"Electronic\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gadgets\",children:\"Gaggets\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Price:\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{value:priceOrder,onChange:e=>{setPriceOrder(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"All\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"LowToHigh\",children:\"Low to High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"HighToLow\",children:\"High To Low\"})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"By Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by name\",value:nameSearch,onChange:e=>setNameSearch(e.target.value)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-list\",children:filteredProducts.length===0?/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\",margin:\"50px\",color:\"green\",width:\"800px\"},children:\"Product Not found ....\"}):filteredProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-image1\",children:/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category :\"}),\" \",product.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description: \"}),product.description.substring(0,25)]}),/*#__PURE__*/_jsxs(\"h2\",{className:\"product-price\",children:[\"Price: \\u20B9 \",product.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"Rating :\"}),product.reviews.length===0?\"Not Available\":product.reviews[0].rating]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>addProductToCart(product.productId),children:\"Add to Cart\"}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product.productId),style:{textDecoration:\"none\",color:\"white\"},children:\"View\"})})]})]})]},product.productId))})]});};export default Product;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","api","jsx","_jsx","jsxs","_jsxs","Product","products","setProducts","filteredProducts","setFilteredProducts","selectedCategory","setSelectedCategory","priceOrder","setPriceOrder","nameSearch","setNameSearch","userid","localStorage","getItem","filterProducts","category","data","filter","product","sort","a","b","price","searchQuery","toLowerCase","name","includes","get","then","response","catch","error","console","addProductToCart","productid","post","concat","setItem","cartId","alert","message","className","children","value","onChange","e","target","type","placeholder","length","style","textAlign","margin","color","width","map","src","imageUrl","alt","description","substring","reviews","rating","onClick","productId","to","textDecoration"],"sources":["C:/Users/rites/OneDrive/Desktop/Spark2.0-Ecom-master/frontend/src/pages/Product.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"../comp_css/Product.css\";\nimport api from \"../Router/api\";\n\nconst Product = () => {\n  const [products, setProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"All\");\n  const [priceOrder, setPriceOrder] = useState(\"All\");\n  const [nameSearch, setNameSearch] = useState(\"\");\n  let userid = localStorage.getItem(\"userid\");\n\n  const filterProducts = (category, priceOrder, nameSearch, data) => {\n    let filteredProducts = data;\n\n    if (category !== \"All\") {\n      filteredProducts = filteredProducts.filter(\n        (product) => product.category === category\n      );\n    }\n    \n    if (priceOrder === \"LowToHigh\") {\n      filteredProducts = filteredProducts.sort((a, b) => a.price - b.price);\n    } else if (priceOrder === \"HighToLow\") {\n      filteredProducts = filteredProducts.sort((a, b) => b.price - a.price);\n    }\n\n    if (nameSearch !== \"\") {\n      const searchQuery = nameSearch.toLowerCase();\n      filteredProducts = filteredProducts.filter((product) =>\n        product.name.toLowerCase().includes(searchQuery)\n      );\n    }\n\n    setFilteredProducts(filteredProducts);\n  };\n\n  useEffect(() => {\n    axios\n      .get(\"http://127.0.0.1:8080/ecom/products/all\")\n      .then((response) => {\n        setProducts(response.data);\n        filterProducts(selectedCategory, priceOrder, nameSearch, response.data);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data from the API: \", error);\n      });\n  }, [selectedCategory, priceOrder, nameSearch]);\n\n  const addProductToCart = (productid) => {\n    api\n      .post(`/ecom/cart/add-product?userId=${userid}&productId=${productid}`)\n      .then((response) => {\n        localStorage.setItem(\"cartid\", response.data.cartId);\n        alert(\"product added to Cart\");\n      })\n      .catch((error) => {\n        if (error.response && error.response.data) {\n          alert(error.response.data.message);\n        } else {\n          alert(\"Error To adding Product . Please try again later.\");\n          console.error(\"Error registering:\", error);\n        }\n      });\n  };\n\n  return (\n    <div className=\"product-page\">\n      <div className=\"filter-section\">\n        <h2>Filter</h2>\n        <hr />\n        <label>Category</label>\n        <select\n          value={selectedCategory}\n          onChange={(e) => {\n            setSelectedCategory(e.target.value);\n          }}\n        >\n          <option value=\"All\">All</option>\n          <option value=\"vegetables\">Vegetable</option>\n          <option value=\"fruits\">Fruits</option>\n          <option value=\"electronics\">Electronic</option>\n          <option value=\"gadgets\">Gaggets</option>\n        </select>\n        <br />\n        <label>Price:</label>\n        <div>\n          <select\n            value={priceOrder}\n            onChange={(e) => {\n              setPriceOrder(e.target.value);\n            }}\n          >\n            <option value=\"All\">All</option>\n            <option value=\"LowToHigh\">Low to High</option>\n            <option value=\"HighToLow\">High To Low</option>\n          </select>\n        </div>\n\n        <br />\n        <div>\n          <h4>By Name</h4>\n          <input\n            type=\"text\"\n            placeholder=\"Search by name\"\n            value={nameSearch}\n            onChange={(e) => setNameSearch(e.target.value)}\n          />\n        </div>\n      </div>\n\n      <div className=\"product-list\">\n        {filteredProducts.length === 0 ? (\n          <h1\n            style={{\n              textAlign: \"center\",\n              margin: \"50px\",\n              color: \"green\",\n              width: \"800px\",\n            }}\n          >\n            Product Not found ....\n          </h1>\n        ) : (\n          filteredProducts.map((product) => (\n            <div className=\"product-card\" key={product.productId}>\n              <div className=\"product-image1\">\n                <img src={product.imageUrl} alt={product.name} />\n              </div>\n              <div className=\"product-info\">\n                <h2>{product.name}</h2>\n                <p>\n                  <strong>Category :</strong> {product.category}\n                </p>\n                <p>\n                  <strong>Description: </strong>\n                  {product.description.substring(0, 25)}\n                </p>\n                <h2 className=\"product-price\">Price: â‚¹ {product.price}</h2>\n                <p>\n                  {\" \"}\n                  <strong>Rating :</strong>\n                  {product.reviews.length === 0\n                    ? \"Not Available\"\n                    : product.reviews[0].rating}\n                </p>\n\n                <div>\n                  <button onClick={() => addProductToCart(product.productId)}>\n                    Add to Cart\n                  </button>\n                  <button>\n                    <Link\n                      to={`/product/${product.productId}`}\n                      style={{ textDecoration: \"none\", color: \"white\" }}\n                    >\n                      View\n                    </Link>\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Product;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,yBAAyB,CAChC,MAAO,CAAAC,GAAG,KAAM,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhC,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACc,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACgB,UAAU,CAAEC,aAAa,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACkB,UAAU,CAAEC,aAAa,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAChD,GAAI,CAAAoB,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAE3C,KAAM,CAAAC,cAAc,CAAGA,CAACC,QAAQ,CAAER,UAAU,CAAEE,UAAU,CAAEO,IAAI,GAAK,CACjE,GAAI,CAAAb,gBAAgB,CAAGa,IAAI,CAE3B,GAAID,QAAQ,GAAK,KAAK,CAAE,CACtBZ,gBAAgB,CAAGA,gBAAgB,CAACc,MAAM,CACvCC,OAAO,EAAKA,OAAO,CAACH,QAAQ,GAAKA,QACpC,CAAC,CACH,CAEA,GAAIR,UAAU,GAAK,WAAW,CAAE,CAC9BJ,gBAAgB,CAAGA,gBAAgB,CAACgB,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAACE,KAAK,CAAGD,CAAC,CAACC,KAAK,CAAC,CACvE,CAAC,IAAM,IAAIf,UAAU,GAAK,WAAW,CAAE,CACrCJ,gBAAgB,CAAGA,gBAAgB,CAACgB,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,CAACC,KAAK,CAAGF,CAAC,CAACE,KAAK,CAAC,CACvE,CAEA,GAAIb,UAAU,GAAK,EAAE,CAAE,CACrB,KAAM,CAAAc,WAAW,CAAGd,UAAU,CAACe,WAAW,CAAC,CAAC,CAC5CrB,gBAAgB,CAAGA,gBAAgB,CAACc,MAAM,CAAEC,OAAO,EACjDA,OAAO,CAACO,IAAI,CAACD,WAAW,CAAC,CAAC,CAACE,QAAQ,CAACH,WAAW,CACjD,CAAC,CACH,CAEAnB,mBAAmB,CAACD,gBAAgB,CAAC,CACvC,CAAC,CAEDX,SAAS,CAAC,IAAM,CACdE,KAAK,CACFiC,GAAG,CAAC,yCAAyC,CAAC,CAC9CC,IAAI,CAAEC,QAAQ,EAAK,CAClB3B,WAAW,CAAC2B,QAAQ,CAACb,IAAI,CAAC,CAC1BF,cAAc,CAACT,gBAAgB,CAAEE,UAAU,CAAEE,UAAU,CAAEoB,QAAQ,CAACb,IAAI,CAAC,CACzE,CAAC,CAAC,CACDc,KAAK,CAAEC,KAAK,EAAK,CAChBC,OAAO,CAACD,KAAK,CAAC,oCAAoC,CAAEA,KAAK,CAAC,CAC5D,CAAC,CAAC,CACN,CAAC,CAAE,CAAC1B,gBAAgB,CAAEE,UAAU,CAAEE,UAAU,CAAC,CAAC,CAE9C,KAAM,CAAAwB,gBAAgB,CAAIC,SAAS,EAAK,CACtCvC,GAAG,CACAwC,IAAI,kCAAAC,MAAA,CAAkCzB,MAAM,gBAAAyB,MAAA,CAAcF,SAAS,CAAE,CAAC,CACtEN,IAAI,CAAEC,QAAQ,EAAK,CAClBjB,YAAY,CAACyB,OAAO,CAAC,QAAQ,CAAER,QAAQ,CAACb,IAAI,CAACsB,MAAM,CAAC,CACpDC,KAAK,CAAC,uBAAuB,CAAC,CAChC,CAAC,CAAC,CACDT,KAAK,CAAEC,KAAK,EAAK,CAChB,GAAIA,KAAK,CAACF,QAAQ,EAAIE,KAAK,CAACF,QAAQ,CAACb,IAAI,CAAE,CACzCuB,KAAK,CAACR,KAAK,CAACF,QAAQ,CAACb,IAAI,CAACwB,OAAO,CAAC,CACpC,CAAC,IAAM,CACLD,KAAK,CAAC,mDAAmD,CAAC,CAC1DP,OAAO,CAACD,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC5C,CACF,CAAC,CAAC,CACN,CAAC,CAED,mBACEhC,KAAA,QAAK0C,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B3C,KAAA,QAAK0C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B7C,IAAA,OAAA6C,QAAA,CAAI,QAAM,CAAI,CAAC,cACf7C,IAAA,QAAK,CAAC,cACNA,IAAA,UAAA6C,QAAA,CAAO,UAAQ,CAAO,CAAC,cACvB3C,KAAA,WACE4C,KAAK,CAAEtC,gBAAiB,CACxBuC,QAAQ,CAAGC,CAAC,EAAK,CACfvC,mBAAmB,CAACuC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CACrC,CAAE,CAAAD,QAAA,eAEF7C,IAAA,WAAQ8C,KAAK,CAAC,KAAK,CAAAD,QAAA,CAAC,KAAG,CAAQ,CAAC,cAChC7C,IAAA,WAAQ8C,KAAK,CAAC,YAAY,CAAAD,QAAA,CAAC,WAAS,CAAQ,CAAC,cAC7C7C,IAAA,WAAQ8C,KAAK,CAAC,QAAQ,CAAAD,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtC7C,IAAA,WAAQ8C,KAAK,CAAC,aAAa,CAAAD,QAAA,CAAC,YAAU,CAAQ,CAAC,cAC/C7C,IAAA,WAAQ8C,KAAK,CAAC,SAAS,CAAAD,QAAA,CAAC,SAAO,CAAQ,CAAC,EAClC,CAAC,cACT7C,IAAA,QAAK,CAAC,cACNA,IAAA,UAAA6C,QAAA,CAAO,QAAM,CAAO,CAAC,cACrB7C,IAAA,QAAA6C,QAAA,cACE3C,KAAA,WACE4C,KAAK,CAAEpC,UAAW,CAClBqC,QAAQ,CAAGC,CAAC,EAAK,CACfrC,aAAa,CAACqC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAC/B,CAAE,CAAAD,QAAA,eAEF7C,IAAA,WAAQ8C,KAAK,CAAC,KAAK,CAAAD,QAAA,CAAC,KAAG,CAAQ,CAAC,cAChC7C,IAAA,WAAQ8C,KAAK,CAAC,WAAW,CAAAD,QAAA,CAAC,aAAW,CAAQ,CAAC,cAC9C7C,IAAA,WAAQ8C,KAAK,CAAC,WAAW,CAAAD,QAAA,CAAC,aAAW,CAAQ,CAAC,EACxC,CAAC,CACN,CAAC,cAEN7C,IAAA,QAAK,CAAC,cACNE,KAAA,QAAA2C,QAAA,eACE7C,IAAA,OAAA6C,QAAA,CAAI,SAAO,CAAI,CAAC,cAChB7C,IAAA,UACEkD,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,gBAAgB,CAC5BL,KAAK,CAAElC,UAAW,CAClBmC,QAAQ,CAAGC,CAAC,EAAKnC,aAAa,CAACmC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAChD,CAAC,EACC,CAAC,EACH,CAAC,cAEN9C,IAAA,QAAK4C,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BvC,gBAAgB,CAAC8C,MAAM,GAAK,CAAC,cAC5BpD,IAAA,OACEqD,KAAK,CAAE,CACLC,SAAS,CAAE,QAAQ,CACnBC,MAAM,CAAE,MAAM,CACdC,KAAK,CAAE,OAAO,CACdC,KAAK,CAAE,OACT,CAAE,CAAAZ,QAAA,CACH,wBAED,CAAI,CAAC,CAELvC,gBAAgB,CAACoD,GAAG,CAAErC,OAAO,eAC3BnB,KAAA,QAAK0C,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B7C,IAAA,QAAK4C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7B7C,IAAA,QAAK2D,GAAG,CAAEtC,OAAO,CAACuC,QAAS,CAACC,GAAG,CAAExC,OAAO,CAACO,IAAK,CAAE,CAAC,CAC9C,CAAC,cACN1B,KAAA,QAAK0C,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B7C,IAAA,OAAA6C,QAAA,CAAKxB,OAAO,CAACO,IAAI,CAAK,CAAC,cACvB1B,KAAA,MAAA2C,QAAA,eACE7C,IAAA,WAAA6C,QAAA,CAAQ,YAAU,CAAQ,CAAC,IAAC,CAACxB,OAAO,CAACH,QAAQ,EAC5C,CAAC,cACJhB,KAAA,MAAA2C,QAAA,eACE7C,IAAA,WAAA6C,QAAA,CAAQ,eAAa,CAAQ,CAAC,CAC7BxB,OAAO,CAACyC,WAAW,CAACC,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,EACpC,CAAC,cACJ7D,KAAA,OAAI0C,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,gBAAS,CAACxB,OAAO,CAACI,KAAK,EAAK,CAAC,cAC3DvB,KAAA,MAAA2C,QAAA,EACG,GAAG,cACJ7C,IAAA,WAAA6C,QAAA,CAAQ,UAAQ,CAAQ,CAAC,CACxBxB,OAAO,CAAC2C,OAAO,CAACZ,MAAM,GAAK,CAAC,CACzB,eAAe,CACf/B,OAAO,CAAC2C,OAAO,CAAC,CAAC,CAAC,CAACC,MAAM,EAC5B,CAAC,cAEJ/D,KAAA,QAAA2C,QAAA,eACE7C,IAAA,WAAQkE,OAAO,CAAEA,CAAA,GAAM9B,gBAAgB,CAACf,OAAO,CAAC8C,SAAS,CAAE,CAAAtB,QAAA,CAAC,aAE5D,CAAQ,CAAC,cACT7C,IAAA,WAAA6C,QAAA,cACE7C,IAAA,CAACJ,IAAI,EACHwE,EAAE,aAAA7B,MAAA,CAAclB,OAAO,CAAC8C,SAAS,CAAG,CACpCd,KAAK,CAAE,CAAEgB,cAAc,CAAE,MAAM,CAAEb,KAAK,CAAE,OAAQ,CAAE,CAAAX,QAAA,CACnD,MAED,CAAM,CAAC,CACD,CAAC,EACN,CAAC,EACH,CAAC,GAnC2BxB,OAAO,CAAC8C,SAoCtC,CACN,CACF,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhE,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}